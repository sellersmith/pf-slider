!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.SliderX=e():t.SliderX=e()}(window,function(){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(n,s,function(e){return t[e]}.bind(null,s));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=1)}([function(t,e){!function(){var t,e,i,n,s,o,r,a,l,d,c,u,h,v,f,p,y,g,S;function m(a){if(a.target.classList.contains("jsn-es-draggable"))f=a.target;else{var l=function(t){var e=t.parentNode,i=null;for(;e&&!i&&!e.isEqualNode(document.body);)e.classList&&e.classList.contains("jsn-es-draggable")?i=e:e=e.parentNode;return i}(a.target);if(!l)return;f=l}if(!p){switch(d=Date.now(),S={},a.type){case"mousedown":if(g)return;t=a.pageX,e=a.pageY,a.preventDefault();break;case"touchstart":if(1!=a.touches.length)return;t=a.touches[0].clientX,e=a.touches[0].clientY}i=0,n=0,s=0,o=0,v=null,0,r="none",h="none",p=!0}}function b(a){if(p){switch(a.type){case"mousemove":if(g)return;var l=a.pageX,u=a.pageY;a.preventDefault();break;case"touchmove":if(1!=a.touches.length)return;l=a.touches[0].clientX,u=a.touches[0].clientY}Date.now(),s+=i=l-t,o+=n=u-e,t=l,e=u,v||(h=Math.abs(s)>Math.abs(o)?"x":Math.abs(s)<Math.abs(o)?"y":"none",Math.max(Math.abs(s),Math.abs(o))>50&&(v=!0)),r=Math.abs(i)>=Math.abs(n)?i>0?"right":i<0?"left":"none":n>0?"down":n<0?"up":"none",y||(y=!0,P(f,C("es_dragstart",a),O()),document.body.classList.add("jsn-es-draggable-dragging"),f.classList.add("jsn-es-draggable-dragging")),y&&(c=Date.now(),w(),d=Date.now(),P(f,C("es_dragmove",a),O()))}}function x(t){if(p){switch(t.type){case"touchend":case"touchcancel":if(t.touches.length)return}p=!1,y&&(c=Date.now(),w(),y=!1,document.body.classList.remove("jsn-es-draggable-dragging"),f.classList.remove("jsn-es-draggable-dragging"),P(f,C("es_dragstop",t),O()))}}function w(){u=c-d,a=Math.abs(i/u),l=Math.abs(n/u)}function O(){var t=S;return t.direction=r,t.axis=h,t.deltaX=i,t.deltaY=n,t.moveX=s,t.moveY=o,t.velocityX=a,t.velocityY=l,S=t,t}function k(t,e,i,n){return t.addEventListener?t.addEventListener(e,i,n):t.attachEvent?t.attachEvent(e,i,n):void 0}function C(t,e){var i=new Event(t);return i.originalEvent=e,i.preventDefault=e.preventDefault.bind(e),i.stopPropagation=e.stopPropagation.bind(e),i}function P(t,e,i){return e.data=i,(t||window).dispatchEvent(e)}window.addEventListener("touchstart",function t(e){g=!0,window.removeEventListener("touchstart",t)}),window.addEventListener("load",function(){k(document.body,"touchstart",m),k(document.body,"touchmove",b),k(document.body,"touchend",x),k(document.body,"touchcancel",x),k(document.body,"mousedown",m),k(document.body,"mousemove",b),k(document.body,"mouseup",x),k(document.body,"blur",x),window.addEventListener("mouseout",function(t){t.toElement||x(t)})})}()},function(t,e,i){"use strict";function n(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}i.r(e);var s=function(t,e){return t.map(function(t){return function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},s=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),s.forEach(function(e){n(t,e,i[e])})}return t}({},t,{index:t.index%e})})};Array.prototype.includes||(Array.prototype.includes=function(t){return-1!==this.indexOf(t)});var o={wrapper:"".concat("pf","-slider-wrapper"),inner:"".concat("pf","-slider-inner"),slide:"".concat("pf","-slider-slide"),indicators:"".concat("pf","-slider-pagination"),controller:"".concat("pf","-slider-nav"),disabledCtrl:"".concat("pf","-slider-nav-disabled"),nextCtrl:"".concat("pf","-next-nav"),prevCtrl:"".concat("pf","-prev-nav"),turnOffMouseEvent:"".concat("pf","-slider-mouse-event-off")},r=function(t,e,i){var n=t.totalSlide,o=t.sliderWidth,r=t.$slides;n*=3;for(var l,d=a(t),c=t.opts,u=c.curr,h=c.slidesToShow,v=c.slidesToScroll,f=c.gutter,p=[],y=0;y<h;y++)p.push((u+y)%n);var g,S=[],m=[],b=[];if("next"===e){var x;g=void 0!==i?p.includes(i)?p.indexOf(i)-p.indexOf(u):h:v,l=void 0!==i?i:(u+v)%n,x=p.includes(l)?r.item(l).getBoundingClientRect().x:o+f;for(var w=0;w<h;w++){var O=x+(d+f)*w;p.includes((l+w)%n)||S.push({index:l+w,readyX:O}),m.push({index:l+w,newX:O-(f+d)*g})}}else if("prev"===e){if(void 0!==i){var k=(i+h-1)%n;g=p.includes(k)?p.indexOf((u+h-1)%n)-p.indexOf(k):h}else g=v;var C;l=void 0!==i?i:(n+(u-v))%n,C=p.includes((l+h-1)%n)?r.item((l+h-1)%n).getBoundingClientRect().x:-(d+f);for(var P=0;P<h;P++){var D=C-(d+f)*(h-P-1);p.includes((l+P)%n)||S.push({index:l+P,readyX:D}),m.push({index:l+P,newX:D+(f+d)*g})}}for(var L=0;L<h;L++){var T=r.item((u+L)%n).getBoundingClientRect().x,E=void 0;if("next"===e?E=T-(f+d)*g:"prev"===e&&(E=T+(f+d)*g),t.moveByDrag){var M=r.item(u%n).getBoundingClientRect().x;"prev"===e?E=T+(o-M)+f:"next"===e&&(E=T-(o+M)-f)}b.push({index:u+L,newX:E})}return S=s(S,n),m=s(m,n),{nextIndex:l,nextSlidesReadyPos:S,currSlidesNewPos:b=s(b,n),nextSlidesNewPos:m}},a=function(t){var e=t.opts,i=e.gutter,n=e.slidesToShow;return(t.sliderWidth-i*(n-1))/n};function l(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var d=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.elems=new Map,this.watch()}return function(t,e,i){e&&l(t.prototype,e),i&&l(t,i)}(t,[{key:"observe",value:function(t,e){if("function"!=typeof e)throw"Callback must be a function";var i=t.getBoundingClientRect();this.elems.set(t,{rect:i,callback:e})}},{key:"unobserve",value:function(t){this.elems.delete(t)}},{key:"watch",value:function(){var t=this;requestAnimationFrame(function(){t.elems.forEach(function(e,i){var n=i.getBoundingClientRect();n.width===e.rect.width&&n.height===e.rect.height||(e.callback(),e.rect=n),t.watch()})})}}]),t}();function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}i.d(e,"PageFlySliderController",function(){return x}),i(0);var h=o.wrapper,v=o.inner,f=o.slide,p=o.indicators,y=o.controller,g=o.nextCtrl,S=o.prevCtrl,m=o.disabledCtrl,b=o.turnOffMouseEvent,x=function(){function t(e,i){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.handleClick=function(t){switch(t.target.dataset.action){case"next":n.next();break;case"prev":n.prev();break;case"goto":var e=parseInt(t.target.dataset.gotoSlide)||0;n.goto(e);break;default:console.log("Slider clicked")}},this.el=e,this.originalStyles={wrapper:"",inner:[]},this.observer=new d,this.observer.observe(this.el,this.handleStyleChange.bind(this)),this.$slider=null,this.sliderHeight=this.el.offsetHeight,this.sliderWidth=this.el.offsetWidth,this.totalSlide=this.el.children.length,this.opts=Object.create(i||{}),this.opts.curr=0,this.autoPlayTimeoutId="",this.initialize()}return function(t,e,i){e&&u(t.prototype,e),i&&u(t,i)}(t,[{key:"initialize",value:function(){this.$slides=this.el.children,this.verifyOptions(),this.el.addEventListener("click",this.handleClick),this.setupSliderDOM(),this.moveByDrag=!1,this.missingSlidesOnDrag=!1,this.$slider.addEventListener("es_dragmove",this.handleDragMove.bind(this)),this.$slider.addEventListener("es_dragstop",this.handleDragStop.bind(this)),this.setAutoPlay(),this.el.dataset.pfSliderXInited=!0,console.log("New PageFly Slider initialized!!!",this)}},{key:"setupSliderDOM",value:function(){var t=this.el,e=this.$slides;t.classList.add(h),this.originalStyles.wrapper=t.getAttribute("style")?t.getAttribute("style"):"";for(var i=document.createElement("div");e.item(0);){var n=e.item(0),s=n.getAttribute("style")?n.getAttribute("style"):"";this.originalStyles.inner.push(s),i.appendChild(n)}this.$slider=i,this.$slides=i.children;var o=document.createElement("a");o.dataset.action="next";var r=document.createElement("a");r.dataset.action="prev";for(var a=document.createElement("ol"),l=0;l<Math.ceil(this.totalSlide/this.opts.slidesToShow);l++){var d=document.createElement("li");d.dataset.action="goto",d.dataset.gotoSlide=l*this.opts.slidesToShow,a.appendChild(d)}t.appendChild(i),t.appendChild(a),t.appendChild(r),t.appendChild(o),this.cloneSlide(),this.updateSliderStyle(),this.udpateActiveSlideStyle()}},{key:"cloneSlide",value:function(){for(var t=this.totalSlide,e=this.$slides,i=this.$slider,n=0;n<2*t;n++){var s=e.item(n%t).cloneNode(!0);s.dataset.slideClone=!0,i.appendChild(s)}}},{key:"handleResize",value:function(t){var e=this.opts,i=e.curr,n=e.slidesToShow,s=e.gutter,o=this.totalSlide,r=this.$slides,l=this.sliderWidth;o*=3;for(var d=a(this),c=0;c<o;c++){var u=r.item(c);u.style.width="".concat(d,"px"),u.style.transition="";var h=c>=i&&c<i+n?(d+s)*(c-i):l+s;u.style.transform="translate3d(".concat(h,"px, 0, 0)")}}},{key:"handleStyleChange",value:function(){this.sliderWidth=this.el.offsetWidth,this.handleResize()}},{key:"handleDragMove",value:function(e){var i=this,n=e.data;if(!(Math.abs(n.moveX)<t.constructor.MIN_DRAG_DISTANCE)){this.clearAutoPlay();var s=n.moveX,o=this.opts,l=o.curr,d=o.slidesToShow,c=o.gutter,u=o.loop,h=(l+d)%(3*this.totalSlide),v=r(this,"next",h).nextSlidesReadyPos;u||(v=v.filter(function(t){return t.index<i.totalSlide}));for(var f=[],p=a(this),y=0;y<d;y++)f.push({index:(y+l)%(3*this.totalSlide),readyX:(p+c)*y});var g=(3*this.totalSlide+(l-d))%(3*this.totalSlide),S=r(this,"prev",g).nextSlidesReadyPos;if(u||(S=S.filter(function(t){return t.index<i.totalSlide})),(0!==l||this.opts.loop||!(s>0))&&!(l+d>=this.totalSlide&&!this.opts.loop&&s<0)){var m=!0,b=!1,x=void 0;try{for(var w,O=S[Symbol.iterator]();!(m=(w=O.next()).done);m=!0){var k=w.value,C=this.$slides.item(k.index);this.translateSlide(C,k.readyX+s)}}catch(t){b=!0,x=t}finally{try{m||null==O.return||O.return()}finally{if(b)throw x}}for(var P=0;P<f.length;P++){var D=f[P],L=this.$slides.item(D.index);this.translateSlide(L,D.readyX+s)}var T=!0,E=!1,M=void 0;try{for(var X,A=v[Symbol.iterator]();!(T=(X=A.next()).done);T=!0){var j=X.value,$=this.$slides.item(j.index);this.translateSlide($,j.readyX+s)}}catch(t){E=!0,M=t}finally{try{T||null==A.return||A.return()}finally{if(E)throw M}}}}}},{key:"handleDragStop",value:function(e){var i=e.data;if(!(Math.abs(i.moveX)<t.constructor.MIN_DRAG_DISTANCE)){this.moveByDrag=!0;var n,s=i.velocityX,o=i.moveX/this.sliderWidth,r="",a=this.totalSlide,l=this.opts,d=l.loop,c=l.curr,u=l.slidesToShow,h=l.duration,v=Math.abs(o)*h;if(s>1||Math.abs(o)>.3){if(!d){if(o<0&&c+2*u>a)return r="prev",n=a-u,this.missingSlidesOnDrag=!0,void this.moveSlide(r,n,v);if(o>0&&c-u<0)return r="next",n=0,this.missingSlidesOnDrag=!0,void this.moveSlide(r,n,v)}v=h-v,o<0?r="next":o>0&&(r="prev")}else o<0?(this.opts.curr+=u,r="prev"):o>0&&(this.opts.curr=3*a+(c-u),r="next"),this.opts.curr%=3*a;n="next"===r?this.opts.curr+u:3*a+(this.opts.curr-u),n%=3*a,this.moveSlide(r,n,v)}}},{key:"verifyOptions",value:function(){var t=this.constructor.defaultOptions;for(var e in t){var i=t[e];c(this.opts[e])!==c(i)&&(this.opts[e]=i)}this.opts.height=this.sliderHeight||this.opts.height,this.opts.loop||(this.opts.autoPlay=!1),1===this.opts.slidesToShow&&(this.opts.gutter=0);var n=this.constructor.styleOptions.paginations,s=this.constructor.styleOptions.navs;n.indexOf(this.opts.paginationStyle)<0&&(this.opts.paginationStyle=n[0]),s.indexOf(this.opts.navStyle)<0&&(this.opts.navStyle=s[0])}},{key:"updateOptions",value:function(t){var e=this.constructor.defaultOptions,i=this.constructor.styleOptions.paginations,n=this.opts.paginationStyle,s=this.constructor.styleOptions.navs,o=this.opts.navStyle;for(var r in t)if(c(t[r])===c(e[r])&&"curr"!==r){var a=t[r];"paginationStyle"===r&&i.indexOf(t[r])<0&&(a=n),"navStyle"===r&&s.indexOf(t[r])<0&&(a=o),this.opts[r]=a}this.opts.loop||(this.opts.autoPlay=!1),this.destroy(),this.initialize()}},{key:"setAutoPlay",value:function(){var t=this;this.opts.autoPlay&&(this.autoPlayTimeoutId=setTimeout(function(){t.moveSlide("next")},this.opts.autoPlayDelay))}},{key:"clearAutoPlay",value:function(){clearTimeout(this.autoPlayTimeoutId)}},{key:"destroy",value:function(){var t=this.el;this.clearAutoPlay();for(var e=[],i=0;i<this.totalSlide;i++){var n=this.$slides.item(i);n.classList.remove(f),n.classList.remove("active"),n.style=this.originalStyles.inner[i],e.push(n)}for(t.classList.remove(h),t.style=this.originalStyles.wrapper,t.removeEventListener("click",this.handleClick),delete t.dataset.pfSliderXInited,delete this.$slider,delete this.$slides,this.observer.unobserve(t);t.firstChild;)t.removeChild(t.firstChild);for(var s=0;s<e.length;s++){var o=e[s];t.appendChild(o)}console.log("Removed slider-x !!")}},{key:"moveSlide",value:function(t,e,i){var n=this;this.clearAutoPlay();var s=this.opts,o=s.curr,a=s.slidesToShow;if(s.loop||this.moveByDrag||!("prev"===t&&0===o||"next"===t&&o+a-1>=this.totalSlide-1||"next"===t&&e+a-1>this.totalSlide-1)){this.el.classList.add(b);var l=r(this,t,e),d=l.nextIndex,c=l.nextSlidesReadyPos,u=l.currSlidesNewPos,h=l.nextSlidesNewPos;if(!this.moveByDrag){var v=!0,f=!1,p=void 0;try{for(var y,g=c[Symbol.iterator]();!(v=(y=g.next()).done);v=!0){var S=y.value,m=this.$slides.item(S.index);this.translateSlide(m,S.readyX)}}catch(t){f=!0,p=t}finally{try{v||null==g.return||g.return()}finally{if(f)throw p}}}this.updateSliderCtrlStyle(d);var x=i||this.opts.duration;setTimeout(function(){if(!n.missingSlidesOnDrag){var t=!0,e=!1,i=void 0;try{for(var s,o=u[Symbol.iterator]();!(t=(s=o.next()).done);t=!0){var r=s.value,a=n.$slides.item(r.index);n.translateSlide(a,r.newX,x)}}catch(t){e=!0,i=t}finally{try{t||null==o.return||o.return()}finally{if(e)throw i}}}var l=!0,d=!1,c=void 0;try{for(var v,f=h[Symbol.iterator]();!(l=(v=f.next()).done);l=!0){var p=v.value,y=n.$slides.item(p.index);n.translateSlide(y,p.newX,x)}}catch(t){d=!0,c=t}finally{try{l||null==f.return||f.return()}finally{if(d)throw c}}setTimeout(function(){n.setAutoPlay(),n.el.classList.remove(b),n.moveByDrag=!1,n.missingSlidesOnDrag=!1},x)},50),this.opts.curr=d,this.udpateActiveSlideStyle()}else this.moveByDrag=!1}},{key:"translateSlide",value:function(t,e,i){var n=i?"transform ".concat(i,"ms linear"):"";t.style.transition=n,t.style.transform="translate3d(".concat(e,"px, 0, 0)")}},{key:"next",value:function(){var t=this.opts,e=t.curr,i=t.loop,n=t.slidesToScroll,s=t.slidesToShow,o=this.totalSlide;i?this.moveSlide("next"):e+n+s>=o?this.goto(o-s):this.moveSlide("next")}},{key:"prev",value:function(){var t=this.opts,e=t.curr,i=t.loop,n=t.slidesToScroll;i?this.moveSlide("prev"):e-n<=0?this.goto(0):this.moveSlide("prev")}},{key:"goto",value:function(t){var e=this.opts,i=e.curr,n=e.loop,s=e.slidesToShow,o=this.totalSlide;if(t>i){if(!n&&t+s>o)return void this.moveSlide("next",o-s);this.moveSlide("next",t)}else t<i&&this.moveSlide("prev",t)}},{key:"updateSliderStyle",value:function(){var t=this.$slider,e=this.$slides,i=this.el,n=this.opts,s=e.item(this.opts.curr),o=a(this),r=n.adaptiveHeight;n.height;if(r){for(var l=0;l<e.length;l++)e.item(l).style.height="";i.style.transition="height ".concat(n.duration,"ms ease-in-out"),t.style.transition="height ".concat(n.duration,"ms ease-in-out"),i.style.height="",t.style.height="".concat(s.height(),"px")}else{for(var d=0;d<e.length;d++)e.item(d).style.cssText+="height: 100%; width: ".concat(o,"px;");t.style.cssText="height: 100%; transition: '';",i.style.transition=""}for(var c=0;c<e.length;c++)e.item(c).classList.add(f);for(var u=n.gutter,h=0;h<e.length;h++){var m=h*(o+u);e.item(h).style.transform="translate3d(".concat(m,"px, 0, 0)")}t.classList.add(v),n.draggable?t.classList.add("jsn-es-draggable"):t.classList.remove("jsn-es-draggable");var b=n.navStyle,x=n.paginationStyle;i.querySelector('a[data-action="next"]').setAttribute("class","".concat(g," ").concat(y," ").concat(b)),i.querySelector('a[data-action="prev"]').setAttribute("class","".concat(S," ").concat(y," ").concat(b)),i.querySelector("ol").setAttribute("class","".concat(p," ").concat(x));var w="none"===b?"none":"flex",O="none"===x?"none":"block";i.querySelector('a[data-action="next"]').style.display=w,i.querySelector('a[data-action="prev"]').style.display=w,i.querySelector("ol.pf-slider-pagination").style.display=O}},{key:"updateSliderCtrlStyle",value:function(t){this.el.querySelectorAll("a.pf-slider-nav").forEach(function(t){return t.classList.remove(m)}),0!==t||this.opts.loop?t!==this.totalSlide-this.opts.slidesToShow||this.opts.loop||this.el.querySelector(".".concat(g)).classList.add(m):this.el.querySelector(".".concat(S)).classList.add(m)}},{key:"udpateActiveSlideStyle",value:function(){var t=this.opts,e=t.curr,i=t.slidesToShow,n=t.loop,s=this.$slider.querySelector(".".concat(f,".active"));s&&s.classList.remove("active"),this.$slides.item(e).classList.add("active");var o=Math.floor(e%this.totalSlide/i)*i;n||e+i===this.totalSlide&&(o=Math.floor((this.totalSlide-1)/i)*i);var r=this.el.querySelector("ol.pf-slider-pagination li.active");r&&r.classList.remove("active"),this.el.querySelector('li[data-goto-slide="'.concat(o,'"]')).classList.add("active"),this.updateSliderCtrlStyle(e)}}]),t}();x.constructor.MIN_DRAG_DISTANCE=5,x.defaultOptions={curr:0,slidesToShow:1,slidesToScroll:1,gutter:15,autoPlay:!0,autoPlayDelay:3e3,duration:450,loop:!0,draggable:!0,paginationStyle:"pagination-style-1",navStyle:"nav-style-1",adaptiveHeight:!1,height:400},x.styleOptions={paginations:["pagination-style-1","pagination-style-2","pagination-style-3","none"],navs:["nav-style-1","nav-style-2","nav-style-3","nav-style-4","nav-style-5","none"]},window.PageFlySliderController=x}])});