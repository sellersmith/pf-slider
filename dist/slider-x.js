!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports["PageFly SliderX"]=e():t["PageFly SliderX"]=e()}(window,(function(){return function(t){var e={};function i(s){if(e[s])return e[s].exports;var n=e[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(s,n,function(e){return t[e]}.bind(null,n));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=1)}([function(t,e){!function(){var t,e,i,s,n,o,r,a,l,d,c,u,h,v,p,f,y,g,S;function b(a){if(a.target.classList.contains("jsn-es-draggable"))p=a.target;else{var l=function(t){var e=t.parentNode,i=null;for(;e&&!i&&!e.isEqualNode(document.body);)e.classList&&e.classList.contains("jsn-es-draggable")?i=e:e=e.parentNode;return i}(a.target);if(!l)return;p=l}if(!f){switch(d=Date.now(),S={},a.type){case"mousedown":if(g)return;t=a.pageX,e=a.pageY;break;case"touchstart":if(1!=a.touches.length)return;t=a.touches[0].clientX,e=a.touches[0].clientY}i=0,s=0,n=0,o=0,v=null,0,r="none",h="none",f=!0}}function m(a){if(f){switch(a.type){case"mousemove":if(g)return;var l=a.pageX,u=a.pageY;a.preventDefault();break;case"touchmove":if(1!=a.touches.length)return;l=a.touches[0].clientX,u=a.touches[0].clientY}Date.now(),n+=i=l-t,o+=s=u-e,t=l,e=u,v||(h=Math.abs(n)>Math.abs(o)?"x":Math.abs(n)<Math.abs(o)?"y":"none",Math.max(Math.abs(n),Math.abs(o))>50&&(v=!0)),r=Math.abs(i)>=Math.abs(s)?i>0?"right":i<0?"left":"none":s>0?"down":s<0?"up":"none",y||(y=!0,E(p,k("es_dragstart",a),O()),document.body.classList.add("jsn-es-draggable-dragging"),p.classList.add("jsn-es-draggable-dragging")),y&&(c=Date.now(),x(),d=Date.now(),E(p,k("es_dragmove",a),O()))}}function w(t){if(f){switch(t.type){case"touchend":case"touchcancel":if(t.touches.length)return}f=!1,y&&(c=Date.now(),x(),y=!1,document.body.classList.remove("jsn-es-draggable-dragging"),p.classList.remove("jsn-es-draggable-dragging"),E(p,k("es_dragstop",t),O()))}}function x(){u=c-d,a=Math.abs(i/u),l=Math.abs(s/u)}function O(){var t=S;return t.direction=r,t.axis=h,t.deltaX=i,t.deltaY=s,t.moveX=n,t.moveY=o,t.velocityX=a,t.velocityY=l,S=t,t}function P(t,e,i,s){return t.addEventListener?t.addEventListener(e,i,s):t.attachEvent?t.attachEvent(e,i,s):void 0}function k(t,e){var i;return"function"==typeof Event?i=new Event(t):(i=document.createEvent("Event")).initEvent(t,!0,!0),i.originalEvent=e,i.preventDefault=e.preventDefault.bind(e),i.stopPropagation=e.stopPropagation.bind(e),i}function E(t,e,i){return e.data=i,(t||window).dispatchEvent(e)}window.addEventListener("touchstart",(function t(e){g=!0,window.removeEventListener("touchstart",t)})),window.addEventListener("load",(function(){P(document.body,"touchstart",b),P(document.body,"touchmove",m),P(document.body,"touchend",w),P(document.body,"touchcancel",w),P(document.body,"mousedown",b),P(document.body,"mousemove",m),P(document.body,"mouseup",w),P(document.body,"blur",w),window.addEventListener("mouseout",(function(t){t.toElement||w(t)}))}))}()},function(t,e,i){"use strict";function s(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function n(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?s(Object(i),!0).forEach((function(e){o(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function o(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}i.r(e),i.d(e,"SliderX",(function(){return O}));var r=function(t,e){return t.map((function(t){return n(n({},t),{},{index:t.index%e})}))};Array.prototype.includes||(Array.prototype.includes=function(t){return-1!==this.indexOf(t)});var a={wrapper:"".concat("pf","-slider-wrapper"),inner:"".concat("pf","-slider-inner"),slide:"".concat("pf","-slider-slide"),indicators:"".concat("pf","-slider-pagination"),controller:"".concat("pf","-slider-nav"),disabledCtrl:"".concat("pf","-slider-nav-disabled"),nextCtrl:"".concat("pf","-next-nav"),prevCtrl:"".concat("pf","-prev-nav"),mouseEventOff:"".concat("pf","-slider-mouse-event-off")},l=function(t,e,i){var s=t.totalSlide,n=t.sliderWidth,o=t.$slides;s*=3;for(var a,l=t.el.getBoundingClientRect().left,c=d(t),u=t.opts,h=u.curr,v=u.slidesToShow,p=u.slidesToScroll,f=u.gutter,y=[],g=0;g<v;g++)y.push((h+g)%s);var S,b=[],m=[],w=[];if("next"===e){var x;S=void 0!==i?y.includes(i)?y.indexOf(i)-y.indexOf(h):v:p,a=void 0!==i?i:(h+p)%s,x=y.includes(a)?o[a].getBoundingClientRect().left-l:n+f;for(var O=0;O<v;O++){var P=x+(c+f)*O;y.includes((a+O)%s)||b.push({index:a+O,readyX:P}),m.push({index:a+O,newX:P-(f+c)*S})}}else if("prev"===e){if(void 0!==i){var k=(i+v-1)%s;S=y.includes(k)?y.indexOf((h+v-1)%s)-y.indexOf(k):v}else S=p;var E;a=void 0!==i?i:(s+(h-p))%s,E=y.includes((a+v-1)%s)?o[(a+v-1)%s].getBoundingClientRect().left-l:-(c+f);for(var C=0;C<v;C++){var L=E-(c+f)*(v-C-1);y.includes((a+C)%s)||b.push({index:a+C,readyX:L}),m.push({index:a+C,newX:L+(f+c)*S})}}for(var D=0;D<v;D++){var A=o[(h+D)%s].getBoundingClientRect().left-l,T=void 0;if("next"===e?T=A-(f+c)*S:"prev"===e&&(T=A+(f+c)*S),t.moveByDrag){var j=o[h%s].getBoundingClientRect().left-l;"prev"===e?T=A+(n-j)+f:"next"===e&&(T=A-(n+j)-f)}w.push({index:h+D,newX:T})}return b=r(b,s),m=r(m,s),{nextIndex:a,nextSlidesReadyPos:b,currSlidesNewPos:w=r(w,s),nextSlidesNewPos:m}},d=function(t){var e=t.opts,i=e.gutter,s=e.slidesToShow;return(t.sliderWidth-i*(s-1))/s};function c(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var u=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.elems=new Map,this.watch()}var e,i,s;return e=t,(i=[{key:"observe",value:function(t,e){if("function"!=typeof e)throw"Callback must be a function";var i=t.getBoundingClientRect();this.elems.set(t,{rect:i,callback:e}),e()}},{key:"unobserve",value:function(t){this.elems.delete(t)}},{key:"watch",value:function(){var t=this;requestAnimationFrame((function(){t.elems.forEach((function(e,i){var s=i.getBoundingClientRect();s.width===e.rect.width&&s.height===e.rect.height||(e.callback(),e.rect=s),t.watch()}))}))}}])&&c(e.prototype,i),s&&c(e,s),t}();function h(t){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function v(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}i(0);var p=a.wrapper,f=a.inner,y=a.slide,g=a.indicators,S=a.controller,b=a.nextCtrl,m=a.prevCtrl,w=a.disabledCtrl,x=a.mouseEventOff,O=function(){function t(e,i){var s=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.handleClick=function(t){switch(t.target.dataset.sliderxAction){case"next":s.next();break;case"prev":s.prev();break;case"goto":var e=parseInt(t.target.dataset.gotoSlide)||0;s.goto(e);break;default:console.log("Slider clicked")}},this.pause=function(){s.paused=!0,s.clearAutoPlay()},this.play=function(){s.paused=!1,s.setAutoPlay()},this.el=e,this.originalStyles={wrapper:"",inner:[]},this.observer=new u,this.$slider=null,this.sliderHeight=this.el.offsetHeight,this.sliderWidth=this.el.offsetWidth,this.totalSlide=this.el.children.length,this.opts=Object.create(i||{}),this.autoPlayTimeoutId="",this.paused=!1,this.init()}var e,i,s;return e=t,(i=[{key:"init",value:function(){this.verifyOptions(),this.el.addEventListener("click",this.handleClick),this.setupSliderDOM(),this.moveByDrag=!1,this.missingSlidesOnDrag=!1,this.$slider.addEventListener("es_dragmove",this.handleDragMove.bind(this)),this.$slider.addEventListener("es_dragstop",this.handleDragStop.bind(this)),this.setAutoPlay(),this.el.dataset.pfSliderXInited=!0,this.observer.observe(this.el,this.handleStyleChange.bind(this)),window.addEventListener("blur",this.pause),window.addEventListener("focus",this.play)}},{key:"setupSliderDOM",value:function(){var t=this.el,e=this.el.children;t.classList.add(p),this.originalStyles.wrapper=t.getAttribute("style")?t.getAttribute("style"):"";for(var i=document.createElement("div");e[0];){var s=e[0],n=s.getAttribute("style")?s.getAttribute("style"):"";this.originalStyles.inner.push(n),i.appendChild(s)}this.$slider=i;var o=document.createElement("button");o.dataset.sliderxAction="next",o.setAttribute("type","button"),o.setAttribute("aria-label","button");var r=document.createElement("button");r.dataset.sliderxAction="prev",r.setAttribute("type","button"),r.setAttribute("aria-label","button");for(var a=document.createElement("ol"),l=0;l<Math.ceil(this.totalSlide/this.opts.slidesToShow);l++){var d=document.createElement("li");d.dataset.sliderxAction="goto",d.dataset.gotoSlide=l*this.opts.slidesToShow,a.appendChild(d)}t.appendChild(i),t.appendChild(a),t.appendChild(r),t.appendChild(o),this.cloneSlide(),this.updateSliderStyle(),this.udpateActiveSlideStyle()}},{key:"cloneSlide",value:function(){for(var t=this.totalSlide,e=this.$slider,i=this.$slides,s=0;s<2*t;s++){var n=i[s%t].cloneNode(!0);n.dataset.slideClone=!0,e.appendChild(n)}}},{key:"handleResize",value:function(t){var e=this.opts,i=e.curr,s=e.slidesToShow,n=e.gutter,o=this.totalSlide,r=this.$slides,a=this.sliderWidth;o*=3;for(var l=d(this),c=0;c<o;c++){var u=r[c];u.style.width="".concat(l,"px"),u.style.transition="";var h=c>=i&&c<i+s?(l+n)*(c-i):a+n;u.style.transform="translate3d(".concat(h,"px, 0, 0)")}}},{key:"handleStyleChange",value:function(){this.sliderWidth=this.el.offsetWidth,this.handleResize()}},{key:"handleDragMove",value:function(e){var i=this,s=e.data;if(!(Math.abs(s.moveX)<t.constructor.MIN_DRAG_DISTANCE)){this.clearAutoPlay();var n=s.moveX,o=this.opts,r=o.curr,a=o.slidesToShow,c=o.gutter,u=o.loop,h=(r+a)%(3*this.totalSlide),v=l(this,"next",h).nextSlidesReadyPos;u||(v=v.filter((function(t){return t.index<i.totalSlide})));for(var p=[],f=d(this),y=0;y<a;y++)p.push({index:(y+r)%(3*this.totalSlide),readyX:(f+c)*y});var g=(3*this.totalSlide+(r-a))%(3*this.totalSlide),S=l(this,"prev",g).nextSlidesReadyPos;if(u||(S=S.filter((function(t){return t.index<i.totalSlide}))),(0!==r||this.opts.loop||!(n>0))&&!(r+a>=this.totalSlide&&!this.opts.loop&&n<0)){for(var b=0;b<S.length;b++){var m=S[b],w=this.$slides[m.index];this.translateSlide(w,m.readyX+n)}for(var x=0;x<p.length;x++){var O=p[x],P=this.$slides[O.index];this.translateSlide(P,O.readyX+n)}for(var k=0;k<v.length;k++){var E=v[k],C=this.$slides[E.index];this.translateSlide(C,E.readyX+n)}}}}},{key:"handleDragStop",value:function(e){var i=e.data;if(!(Math.abs(i.moveX)<t.constructor.MIN_DRAG_DISTANCE)){this.moveByDrag=!0;var s,n=i.velocityX,o=i.moveX/this.sliderWidth,r="",a=this.totalSlide,l=this.opts,d=l.loop,c=l.curr,u=l.slidesToShow,h=l.duration,v=Math.abs(o)*h;if(n>1||Math.abs(o)>.3){if(!d){if(o<0&&c+2*u>a)return r="prev",s=a-u,this.missingSlidesOnDrag=!0,void this.moveSlide(r,s,v);if(o>0&&c-u<0)return r="next",s=0,this.missingSlidesOnDrag=!0,void this.moveSlide(r,s,v)}v=h-v,o<0?r="next":o>0&&(r="prev")}else o<0?(this.opts.curr+=u,r="prev"):o>0&&(this.opts.curr=3*a+(c-u),r="next"),this.opts.curr%=3*a;s="next"===r?this.opts.curr+u:3*a+(this.opts.curr-u),s%=3*a,this.moveSlide(r,s,v)}}},{key:"verifyOptions",value:function(){var t=this.constructor.defaultOptions;for(var e in t){var i=t[e];h(this.opts[e])!==h(i)&&(this.opts[e]=i)}this.opts.height=this.sliderHeight||this.opts.height,this.opts.loop||(this.opts.autoPlay=!1),1===this.opts.slidesToShow&&(this.opts.gutter=0);var s=this.constructor.styleOptions.paginations,n=this.constructor.styleOptions.navs;s.indexOf(this.opts.paginationStyle)<0&&(this.opts.paginationStyle=s[0]),n.indexOf(this.opts.navStyle)<0&&(this.opts.navStyle=n[0])}},{key:"updateOptions",value:function(t){var e=this.constructor.defaultOptions,i=this.constructor.styleOptions.paginations,s=this.opts.paginationStyle,n=this.constructor.styleOptions.navs,o=this.opts.navStyle;for(var r in t)if(h(t[r])===h(e[r])&&"curr"!==r){var a=t[r];"paginationStyle"===r&&i.indexOf(t[r])<0&&(a=s),"navStyle"===r&&n.indexOf(t[r])<0&&(a=o),this.opts[r]=a}this.opts.loop||(this.opts.autoPlay=!1),this.destroy(),this.init()}},{key:"setAutoPlay",value:function(){var t=this;this.opts.autoPlay&&!this.paused&&(this.autoPlayTimeoutId=setTimeout((function(){t.moveSlide("next")}),this.opts.autoPlayDelay))}},{key:"clearAutoPlay",value:function(){clearTimeout(this.autoPlayTimeoutId)}},{key:"destroy",value:function(){var t=this.el;this.clearAutoPlay();for(var e=[],i=0;i<this.totalSlide;i++){var s=this.$slides[i];s.classList.remove(y),s.classList.remove("active"),s.style=this.originalStyles.inner[i],e.push(s)}for(t.classList.remove(p),t.style=this.originalStyles.wrapper,t.removeEventListener("click",this.handleClick),delete t.dataset.pfSliderXInited,delete this.$slider,delete this.$slides,this.observer.unobserve(t),window.removeEventListener("blur",this.pause),window.removeEventListener("focus",this.play);t.firstChild;)t.removeChild(t.firstChild);for(var n=0;n<e.length;n++)t.appendChild(e[n])}},{key:"moveSlide",value:function(t,e,i){var s=this;this.clearAutoPlay();var n=this.opts,o=n.curr,r=n.slidesToShow;if(n.loop||this.moveByDrag||!("prev"===t&&0===o||"next"===t&&o+r-1>=this.totalSlide-1||"next"===t&&e+r-1>this.totalSlide-1)){this.el.classList.add(x);var a=l(this,t,e),d=a.nextIndex,c=a.nextSlidesReadyPos,u=a.currSlidesNewPos,h=a.nextSlidesNewPos;if(!this.moveByDrag)for(var v=0;v<c.length;v++){var p=c[v],f=this.$slides[p.index];this.translateSlide(f,p.readyX)}this.updateSliderCtrlStyle(d);var y=i||this.opts.duration;setTimeout((function(){if(!s.missingSlidesOnDrag)for(var t=0;t<u.length;t++){var e=u[t],i=s.$slides[e.index];s.translateSlide(i,e.newX,y)}for(var n=0;n<h.length;n++){var o=h[n],r=s.$slides[o.index];s.translateSlide(r,o.newX,y)}setTimeout((function(){s.setAutoPlay(),s.el.classList.remove(x),s.moveByDrag=!1,s.missingSlidesOnDrag=!1}),y)}),50),this.opts.curr=d,this.udpateActiveSlideStyle()}else this.moveByDrag=!1}},{key:"translateSlide",value:function(t,e,i){var s=i?"transform ".concat(i,"ms ease"):"";t.style.transition=s,t.style.transform="translate3d(".concat(e,"px, 0, 0)")}},{key:"next",value:function(){var t=this.opts,e=t.curr,i=t.loop,s=t.slidesToScroll,n=t.slidesToShow,o=this.totalSlide;i?this.moveSlide("next"):e+s+n>=o?this.goto(o-n):this.moveSlide("next")}},{key:"prev",value:function(){var t=this.opts,e=t.curr,i=t.loop,s=t.slidesToScroll;i?this.moveSlide("prev"):e-s<=0?this.goto(0):this.moveSlide("prev")}},{key:"goto",value:function(t){var e=this.opts,i=e.curr,s=e.loop,n=e.slidesToShow,o=this.totalSlide;if(t>i){if(!s&&t+n>o)return void this.moveSlide("next",o-n);this.moveSlide("next",t)}else t<i&&this.moveSlide("prev",t)}},{key:"updateSliderStyle",value:function(){var t=this.$slider,e=this.$slides,i=this.el,s=this.opts,n=e[this.opts.curr],o=d(this),r=s.adaptiveHeight;if(s.height,r){for(var a=0;a<e.length;a++)e[a].style.height="";i.style.transition="height ".concat(s.duration,"ms ease-in-out"),t.style.transition="height ".concat(s.duration,"ms ease-in-out"),i.style.height="",t.style.height="".concat(n.height(),"px")}else{for(var l=0;l<e.length;l++)e[l].style.cssText+="height: 100%; width: ".concat(o,"px;");t.style.cssText="height: 100%; transition: '';",i.style.transition=""}for(var c=0;c<e.length;c++)e[c].classList.add(y);for(var u=s.gutter,h=0;h<e.length;h++){var v=h*(o+u);e[h].style.transform="translate3d(".concat(v,"px, 0, 0)")}t.classList.add(f),s.draggable?t.classList.add("jsn-es-draggable"):t.classList.remove("jsn-es-draggable");var p=s.navStyle,w=s.paginationStyle;i.querySelector('[data-sliderx-action="next"]').setAttribute("class","".concat(b," ").concat(S," ").concat(p,"-right")),i.querySelector('[data-sliderx-action="prev"]').setAttribute("class","".concat(m," ").concat(S," ").concat(p,"-left")),i.querySelector("ol").setAttribute("class","".concat(g," ").concat(w));var x="none"===p?"none":"flex",O="none"===w?"none":"block";i.querySelector('[data-sliderx-action="next"]').style.display=x,i.querySelector('[data-sliderx-action="prev"]').style.display=x,i.querySelector("ol.pf-slider-pagination").style.display=O}},{key:"updateSliderCtrlStyle",value:function(t){var e=this.totalSlide,i=this.opts,s=this.el,n=i.loop,o=i.slidesToShow,r=s.querySelector(".pf-next-nav"),a=s.querySelector(".pf-prev-nav");r.classList.remove(w),a.classList.remove(w),0!==t||n?t!==e-o||n||r.classList.add(w):a.classList.add(w)}},{key:"udpateActiveSlideStyle",value:function(){var t=this.opts,e=t.curr,i=t.slidesToShow,s=t.loop,n=this.$slider.querySelector(".".concat(y,".active"));n&&n.classList.remove("active"),this.$slides[e].classList.add("active");var o=Math.floor(e%this.totalSlide/i)*i;s||e+i===this.totalSlide&&(o=Math.floor((this.totalSlide-1)/i)*i);var r=this.el.querySelector("ol.pf-slider-pagination li.active");r&&r.classList.remove("active"),this.el.querySelector('li[data-goto-slide="'.concat(o,'"]')).classList.add("active"),this.updateSliderCtrlStyle(e)}},{key:"$slides",get:function(){return this.$slider?this.$slider.children:[]}}])&&v(e.prototype,i),s&&v(e,s),t}();O.constructor.MIN_DRAG_DISTANCE=5,O.defaultOptions={curr:0,slidesToShow:1,slidesToScroll:1,gutter:15,autoPlay:!0,autoPlayDelay:3e3,duration:400,loop:!0,draggable:!0,paginationStyle:"pagination-style-1",navStyle:"nav-style-1 fa-caret",adaptiveHeight:!1,height:400},O.styleOptions={paginations:["pagination-style-1","pagination-style-2","pagination-style-3","none"],navs:["nav-style-1 fa-caret","nav-style-2 fa-angle","nav-style-3 fa-angle","nav-style-4 fa-long-arrow","nav-style-5 fa-long-arrow","none"]},window.SliderX=O}])}));