!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.SliderX=e():t.SliderX=e()}(window,function(){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(n,s,function(e){return t[e]}.bind(null,s));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=1)}([function(t,e){!function(){var t,e,i,n,s,o,a,r,l,d,c,u,h,v,p,f,y,g,S;function m(r){if(r.target.classList.contains("jsn-es-draggable"))p=r.target;else{var l=function(t){var e=t.parentNode,i=null;for(;e&&!i&&!e.isEqualNode(document.body);)e.classList&&e.classList.contains("jsn-es-draggable")?i=e:e=e.parentNode;return i}(r.target);if(!l)return;p=l}if(!f){switch(d=Date.now(),S={},r.type){case"mousedown":if(g)return;t=r.pageX,e=r.pageY,r.preventDefault();break;case"touchstart":if(1!=r.touches.length)return;t=r.touches[0].clientX,e=r.touches[0].clientY}i=0,n=0,s=0,o=0,v=null,0,a="none",h="none",f=!0}}function b(r){if(f){switch(r.type){case"mousemove":if(g)return;var l=r.pageX,u=r.pageY;r.preventDefault();break;case"touchmove":if(1!=r.touches.length)return;l=r.touches[0].clientX,u=r.touches[0].clientY}Date.now(),s+=i=l-t,o+=n=u-e,t=l,e=u,v||(h=Math.abs(s)>Math.abs(o)?"x":Math.abs(s)<Math.abs(o)?"y":"none",Math.max(Math.abs(s),Math.abs(o))>50&&(v=!0)),a=Math.abs(i)>=Math.abs(n)?i>0?"right":i<0?"left":"none":n>0?"down":n<0?"up":"none",y||(y=!0,P(p,C("es_dragstart",r),O()),document.body.classList.add("jsn-es-draggable-dragging"),p.classList.add("jsn-es-draggable-dragging")),y&&(c=Date.now(),w(),d=Date.now(),P(p,C("es_dragmove",r),O()))}}function x(t){if(f){switch(t.type){case"touchend":case"touchcancel":if(t.touches.length)return}f=!1,y&&(c=Date.now(),w(),y=!1,document.body.classList.remove("jsn-es-draggable-dragging"),p.classList.remove("jsn-es-draggable-dragging"),P(p,C("es_dragstop",t),O()))}}function w(){u=c-d,r=Math.abs(i/u),l=Math.abs(n/u)}function O(){var t=S;return t.direction=a,t.axis=h,t.deltaX=i,t.deltaY=n,t.moveX=s,t.moveY=o,t.velocityX=r,t.velocityY=l,S=t,t}function k(t,e,i,n){return t.addEventListener?t.addEventListener(e,i,n):t.attachEvent?t.attachEvent(e,i,n):void 0}function C(t,e){var i;return"function"==typeof Event?i=new Event(t):(i=document.createEvent("Event")).initEvent(t,!0,!0),i.originalEvent=e,i.preventDefault=e.preventDefault.bind(e),i.stopPropagation=e.stopPropagation.bind(e),i}function P(t,e,i){return e.data=i,(t||window).dispatchEvent(e)}window.addEventListener("touchstart",function t(e){g=!0,window.removeEventListener("touchstart",t)}),window.addEventListener("load",function(){k(document.body,"touchstart",m),k(document.body,"touchmove",b),k(document.body,"touchend",x),k(document.body,"touchcancel",x),k(document.body,"mousedown",m),k(document.body,"mousemove",b),k(document.body,"mouseup",x),k(document.body,"blur",x),window.addEventListener("mouseout",function(t){t.toElement||x(t)})})}()},function(t,e,i){"use strict";function n(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}i.r(e);var s=function(t,e){return t.map(function(t){return function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},s=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),s.forEach(function(e){n(t,e,i[e])})}return t}({},t,{index:t.index%e})})};Array.prototype.includes||(Array.prototype.includes=function(t){return-1!==this.indexOf(t)});var o={wrapper:"".concat("pf","-slider-wrapper"),inner:"".concat("pf","-slider-inner"),slide:"".concat("pf","-slider-slide"),indicators:"".concat("pf","-slider-pagination"),controller:"".concat("pf","-slider-nav"),disabledCtrl:"".concat("pf","-slider-nav-disabled"),nextCtrl:"".concat("pf","-next-nav"),prevCtrl:"".concat("pf","-prev-nav"),turnOffMouseEvent:"".concat("pf","-slider-mouse-event-off")},a=function(t,e,i){var n=t.totalSlide,o=t.sliderWidth,a=t.$slides;n*=3;for(var l,d=t.el.getBoundingClientRect().left,c=r(t),u=t.opts,h=u.curr,v=u.slidesToShow,p=u.slidesToScroll,f=u.gutter,y=[],g=0;g<v;g++)y.push((h+g)%n);var S,m=[],b=[],x=[];if("next"===e){var w;S=void 0!==i?y.includes(i)?y.indexOf(i)-y.indexOf(h):v:p,l=void 0!==i?i:(h+p)%n,w=y.includes(l)?a[l].getBoundingClientRect().left-d:o+f;for(var O=0;O<v;O++){var k=w+(c+f)*O;y.includes((l+O)%n)||m.push({index:l+O,readyX:k}),b.push({index:l+O,newX:k-(f+c)*S})}}else if("prev"===e){if(void 0!==i){var C=(i+v-1)%n;S=y.includes(C)?y.indexOf((h+v-1)%n)-y.indexOf(C):v}else S=p;var P;l=void 0!==i?i:(n+(h-p))%n,P=y.includes((l+v-1)%n)?a[(l+v-1)%n].getBoundingClientRect().left-d:-(c+f);for(var D=0;D<v;D++){var E=P-(c+f)*(v-D-1);y.includes((l+D)%n)||m.push({index:l+D,readyX:E}),b.push({index:l+D,newX:E+(f+c)*S})}}for(var L=0;L<v;L++){var T=a[(h+L)%n].getBoundingClientRect().left-d,M=void 0;if("next"===e?M=T-(f+c)*S:"prev"===e&&(M=T+(f+c)*S),t.moveByDrag){var X=a[h%n].getBoundingClientRect().left-d;"prev"===e?M=T+(o-X)+f:"next"===e&&(M=T-(o+X)-f)}x.push({index:h+L,newX:M})}return m=s(m,n),b=s(b,n),{nextIndex:l,nextSlidesReadyPos:m,currSlidesNewPos:x=s(x,n),nextSlidesNewPos:b}},r=function(t){var e=t.opts,i=e.gutter,n=e.slidesToShow;return(t.sliderWidth-i*(n-1))/n};function l(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var d=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.elems=new Map,this.watch()}return function(t,e,i){e&&l(t.prototype,e),i&&l(t,i)}(t,[{key:"observe",value:function(t,e){if("function"!=typeof e)throw"Callback must be a function";var i=t.getBoundingClientRect();this.elems.set(t,{rect:i,callback:e}),e()}},{key:"unobserve",value:function(t){this.elems.delete(t)}},{key:"watch",value:function(){var t=this;requestAnimationFrame(function(){t.elems.forEach(function(e,i){var n=i.getBoundingClientRect();n.width===e.rect.width&&n.height===e.rect.height||(e.callback(),e.rect=n),t.watch()})})}}]),t}();function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}i.d(e,"PageFlySliderController",function(){return x}),i(0);var h=o.wrapper,v=o.inner,p=o.slide,f=o.indicators,y=o.controller,g=o.nextCtrl,S=o.prevCtrl,m=o.disabledCtrl,b=o.turnOffMouseEvent,x=function(){function t(e,i){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.handleClick=function(t){switch(t.target.dataset.action){case"next":n.next();break;case"prev":n.prev();break;case"goto":var e=parseInt(t.target.dataset.gotoSlide)||0;n.goto(e);break;default:console.log("Slider clicked")}},this.el=e,this.originalStyles={wrapper:"",inner:[]},this.observer=new d,this.$slider=null,this.sliderHeight=this.el.offsetHeight,this.sliderWidth=this.el.offsetWidth,this.totalSlide=this.el.children.length,this.opts=Object.create(i||{}),this.autoPlayTimeoutId="",this.initialize()}return function(t,e,i){e&&u(t.prototype,e),i&&u(t,i)}(t,[{key:"initialize",value:function(){this.opts.curr=0,this.verifyOptions(),this.el.addEventListener("click",this.handleClick),this.setupSliderDOM(),this.moveByDrag=!1,this.missingSlidesOnDrag=!1,this.$slider.addEventListener("es_dragmove",this.handleDragMove.bind(this)),this.$slider.addEventListener("es_dragstop",this.handleDragStop.bind(this)),this.setAutoPlay(),this.el.dataset.pfSliderXInited=!0,this.observer.observe(this.el,this.handleStyleChange.bind(this)),console.log("New PageFly Slider initialized!!!",this)}},{key:"setupSliderDOM",value:function(){var t=this.el,e=this.el.children;t.classList.add(h),this.originalStyles.wrapper=t.getAttribute("style")?t.getAttribute("style"):"";for(var i=document.createElement("div");e[0];){var n=e[0],s=n.getAttribute("style")?n.getAttribute("style"):"";this.originalStyles.inner.push(s),i.appendChild(n)}this.$slider=i;var o=document.createElement("a");o.dataset.action="next";var a=document.createElement("a");a.dataset.action="prev";for(var r=document.createElement("ol"),l=0;l<Math.ceil(this.totalSlide/this.opts.slidesToShow);l++){var d=document.createElement("li");d.dataset.action="goto",d.dataset.gotoSlide=l*this.opts.slidesToShow,r.appendChild(d)}t.appendChild(i),t.appendChild(r),t.appendChild(a),t.appendChild(o),this.cloneSlide(),this.updateSliderStyle(),this.udpateActiveSlideStyle()}},{key:"cloneSlide",value:function(){for(var t=this.totalSlide,e=this.$slider,i=this.$slides,n=0;n<2*t;n++){var s=i[n%t].cloneNode(!0);s.dataset.slideClone=!0,e.appendChild(s)}}},{key:"handleResize",value:function(t){console.log("PF Slider: style changed");var e=this.opts,i=e.curr,n=e.slidesToShow,s=e.gutter,o=this.totalSlide,a=this.$slides,l=this.sliderWidth;o*=3;for(var d=r(this),c=0;c<o;c++){var u=a[c];u.style.width="".concat(d,"px"),u.style.transition="";var h=c>=i&&c<i+n?(d+s)*(c-i):l+s;u.style.transform="translate3d(".concat(h,"px, 0, 0)")}}},{key:"handleStyleChange",value:function(){this.sliderWidth=this.el.offsetWidth,this.handleResize()}},{key:"handleDragMove",value:function(e){var i=this,n=e.data;if(!(Math.abs(n.moveX)<t.constructor.MIN_DRAG_DISTANCE)){this.clearAutoPlay();var s=n.moveX,o=this.opts,l=o.curr,d=o.slidesToShow,c=o.gutter,u=o.loop,h=(l+d)%(3*this.totalSlide),v=a(this,"next",h).nextSlidesReadyPos;u||(v=v.filter(function(t){return t.index<i.totalSlide}));for(var p=[],f=r(this),y=0;y<d;y++)p.push({index:(y+l)%(3*this.totalSlide),readyX:(f+c)*y});var g=(3*this.totalSlide+(l-d))%(3*this.totalSlide),S=a(this,"prev",g).nextSlidesReadyPos;if(u||(S=S.filter(function(t){return t.index<i.totalSlide})),(0!==l||this.opts.loop||!(s>0))&&!(l+d>=this.totalSlide&&!this.opts.loop&&s<0)){for(var m=0;m<S.length;m++){var b=S[m],x=this.$slides[b.index];this.translateSlide(x,b.readyX+s)}for(var w=0;w<p.length;w++){var O=p[w],k=this.$slides[O.index];this.translateSlide(k,O.readyX+s)}for(var C=0;C<v.length;C++){var P=v[C],D=this.$slides[P.index];this.translateSlide(D,P.readyX+s)}}}}},{key:"handleDragStop",value:function(e){var i=e.data;if(!(Math.abs(i.moveX)<t.constructor.MIN_DRAG_DISTANCE)){this.moveByDrag=!0;var n,s=i.velocityX,o=i.moveX/this.sliderWidth,a="",r=this.totalSlide,l=this.opts,d=l.loop,c=l.curr,u=l.slidesToShow,h=l.duration,v=Math.abs(o)*h;if(s>1||Math.abs(o)>.3){if(!d){if(o<0&&c+2*u>r)return a="prev",n=r-u,this.missingSlidesOnDrag=!0,void this.moveSlide(a,n,v);if(o>0&&c-u<0)return a="next",n=0,this.missingSlidesOnDrag=!0,void this.moveSlide(a,n,v)}v=h-v,o<0?a="next":o>0&&(a="prev")}else o<0?(this.opts.curr+=u,a="prev"):o>0&&(this.opts.curr=3*r+(c-u),a="next"),this.opts.curr%=3*r;n="next"===a?this.opts.curr+u:3*r+(this.opts.curr-u),n%=3*r,this.moveSlide(a,n,v)}}},{key:"verifyOptions",value:function(){var t=this.constructor.defaultOptions;for(var e in t){var i=t[e];c(this.opts[e])!==c(i)&&(this.opts[e]=i)}this.opts.height=this.sliderHeight||this.opts.height,this.opts.loop||(this.opts.autoPlay=!1),1===this.opts.slidesToShow&&(this.opts.gutter=0);var n=this.constructor.styleOptions.paginations,s=this.constructor.styleOptions.navs;n.indexOf(this.opts.paginationStyle)<0&&(this.opts.paginationStyle=n[0]),s.indexOf(this.opts.navStyle)<0&&(this.opts.navStyle=s[0])}},{key:"updateOptions",value:function(t){var e=this.constructor.defaultOptions,i=this.constructor.styleOptions.paginations,n=this.opts.paginationStyle,s=this.constructor.styleOptions.navs,o=this.opts.navStyle;for(var a in t)if(c(t[a])===c(e[a])&&"curr"!==a){var r=t[a];"paginationStyle"===a&&i.indexOf(t[a])<0&&(r=n),"navStyle"===a&&s.indexOf(t[a])<0&&(r=o),this.opts[a]=r}this.opts.loop||(this.opts.autoPlay=!1),this.destroy(),this.initialize()}},{key:"setAutoPlay",value:function(){var t=this;this.opts.autoPlay&&(this.autoPlayTimeoutId=setTimeout(function(){t.moveSlide("next")},this.opts.autoPlayDelay))}},{key:"clearAutoPlay",value:function(){clearTimeout(this.autoPlayTimeoutId)}},{key:"destroy",value:function(){var t=this.el;this.clearAutoPlay();for(var e=[],i=0;i<this.totalSlide;i++){var n=this.$slides[i];n.classList.remove(p),n.classList.remove("active"),n.style=this.originalStyles.inner[i],e.push(n)}for(t.classList.remove(h),t.style=this.originalStyles.wrapper,t.removeEventListener("click",this.handleClick),delete t.dataset.pfSliderXInited,delete this.$slider,delete this.$slides,this.observer.unobserve(t);t.firstChild;)t.removeChild(t.firstChild);for(var s=0;s<e.length;s++)t.appendChild(e[s]);console.log("Removed slider-x !!")}},{key:"moveSlide",value:function(t,e,i){var n=this;this.clearAutoPlay();var s=this.opts,o=s.curr,r=s.slidesToShow;if(s.loop||this.moveByDrag||!("prev"===t&&0===o||"next"===t&&o+r-1>=this.totalSlide-1||"next"===t&&e+r-1>this.totalSlide-1)){this.el.classList.add(b);var l=a(this,t,e),d=l.nextIndex,c=l.nextSlidesReadyPos,u=l.currSlidesNewPos,h=l.nextSlidesNewPos;if(!this.moveByDrag)for(var v=0;v<c.length;v++){var p=c[v],f=this.$slides[p.index];this.translateSlide(f,p.readyX)}this.updateSliderCtrlStyle(d);var y=i||this.opts.duration;setTimeout(function(){if(!n.missingSlidesOnDrag)for(var t=0;t<u.length;t++){var e=u[t],i=n.$slides[e.index];n.translateSlide(i,e.newX,y)}for(var s=0;s<h.length;s++){var o=h[s],a=n.$slides[o.index];n.translateSlide(a,o.newX,y)}setTimeout(function(){n.setAutoPlay(),n.el.classList.remove(b),n.moveByDrag=!1,n.missingSlidesOnDrag=!1},y)},50),this.opts.curr=d,this.udpateActiveSlideStyle()}else this.moveByDrag=!1}},{key:"translateSlide",value:function(t,e,i){var n=i?"transform ".concat(i,"ms linear"):"";t.style.transition=n,t.style.transform="translate3d(".concat(e,"px, 0, 0)")}},{key:"next",value:function(){var t=this.opts,e=t.curr,i=t.loop,n=t.slidesToScroll,s=t.slidesToShow,o=this.totalSlide;i?this.moveSlide("next"):e+n+s>=o?this.goto(o-s):this.moveSlide("next")}},{key:"prev",value:function(){var t=this.opts,e=t.curr,i=t.loop,n=t.slidesToScroll;i?this.moveSlide("prev"):e-n<=0?this.goto(0):this.moveSlide("prev")}},{key:"goto",value:function(t){var e=this.opts,i=e.curr,n=e.loop,s=e.slidesToShow,o=this.totalSlide;if(t>i){if(!n&&t+s>o)return void this.moveSlide("next",o-s);this.moveSlide("next",t)}else t<i&&this.moveSlide("prev",t)}},{key:"updateSliderStyle",value:function(){var t=this.$slider,e=this.$slides,i=this.el,n=this.opts,s=e[this.opts.curr],o=r(this),a=n.adaptiveHeight;n.height;if(a){for(var l=0;l<e.length;l++)e[l].style.height="";i.style.transition="height ".concat(n.duration,"ms ease-in-out"),t.style.transition="height ".concat(n.duration,"ms ease-in-out"),i.style.height="",t.style.height="".concat(s.height(),"px")}else{for(var d=0;d<e.length;d++)e[d].style.cssText+="height: 100%; width: ".concat(o,"px;");t.style.cssText="height: 100%; transition: '';",i.style.transition=""}for(var c=0;c<e.length;c++)e[c].classList.add(p);for(var u=n.gutter,h=0;h<e.length;h++){var m=h*(o+u);e[h].style.transform="translate3d(".concat(m,"px, 0, 0)")}t.classList.add(v),n.draggable?t.classList.add("jsn-es-draggable"):t.classList.remove("jsn-es-draggable");var b=n.navStyle,x=n.paginationStyle;i.querySelector('a[data-action="next"]').setAttribute("class","".concat(g," ").concat(y," ").concat(b)),i.querySelector('a[data-action="prev"]').setAttribute("class","".concat(S," ").concat(y," ").concat(b)),i.querySelector("ol").setAttribute("class","".concat(f," ").concat(x));var w="none"===b?"none":"flex",O="none"===x?"none":"block";i.querySelector('a[data-action="next"]').style.display=w,i.querySelector('a[data-action="prev"]').style.display=w,i.querySelector("ol.pf-slider-pagination").style.display=O}},{key:"updateSliderCtrlStyle",value:function(t){for(var e=this.el.querySelectorAll("a.pf-slider-nav"),i=0;i<e.length;i++){e[i].classList.remove(m)}0!==t||this.opts.loop?t!==this.totalSlide-this.opts.slidesToShow||this.opts.loop||this.el.querySelector(".".concat(g)).classList.add(m):this.el.querySelector(".".concat(S)).classList.add(m)}},{key:"udpateActiveSlideStyle",value:function(){var t=this.opts,e=t.curr,i=t.slidesToShow,n=t.loop,s=this.$slider.querySelector(".".concat(p,".active"));s&&s.classList.remove("active"),this.$slides[e].classList.add("active");var o=Math.floor(e%this.totalSlide/i)*i;n||e+i===this.totalSlide&&(o=Math.floor((this.totalSlide-1)/i)*i);var a=this.el.querySelector("ol.pf-slider-pagination li.active");a&&a.classList.remove("active"),this.el.querySelector('li[data-goto-slide="'.concat(o,'"]')).classList.add("active"),this.updateSliderCtrlStyle(e)}},{key:"$slides",get:function(){return this.$slider?this.$slider.children:[]}}]),t}();x.constructor.MIN_DRAG_DISTANCE=5,x.defaultOptions={curr:0,slidesToShow:1,slidesToScroll:1,gutter:15,autoPlay:!0,autoPlayDelay:3e3,duration:450,loop:!0,draggable:!0,paginationStyle:"pagination-style-1",navStyle:"nav-style-1",adaptiveHeight:!1,height:400},x.styleOptions={paginations:["pagination-style-1","pagination-style-2","pagination-style-3","none"],navs:["nav-style-1","nav-style-2","nav-style-3","nav-style-4","nav-style-5","none"]},window.PageFlySliderController=x}])});